---
// Get the sidebar data from Starlight
const { sidebar } = Astro.locals.starlightRoute;
---

<nav style="
  padding: 1rem;
  background: #1F1F1F;
  height: 100%;
  overflow-y: auto;
">
  {sidebar.map((group, groupIndex) => (
    <details open style="margin-bottom: 1rem;">
      <summary style="
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.875rem;
        letter-spacing: 0.05em;
        padding: 0.5rem 0;
        font-weight: 600;
        cursor: pointer;
        list-style: none;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        user-select: none;
      ">
        <svg width="12" height="12" viewBox="0 0 12 12" fill="none" style="transition: transform 0.2s;">
          <path d="M4 2L8 6L4 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        {group.label}
      </summary>
      
      <ul style="
        list-style: none;
        padding: 0;
        margin: 0.5rem 0 0 0;
      ">
        {group.entries.map((entry) => (
          <li style="margin: 0;">
            {groupIndex < 2 ? (
              <a 
                href={entry.href}
                aria-current={entry.isCurrent ? 'page' : undefined}
                style={`
                  display: block;
                  padding: 0.5rem 0.75rem;
                  color: ${entry.isCurrent ? '#fff' : 'rgba(255, 255, 255, 0.85)'};
                  text-decoration: none;
                  border-radius: 0.375rem;
                  font-size: 0.9375rem;
                  transition: all 0.2s;
                  background: ${entry.isCurrent ? 'rgba(255, 255, 255, 0.2)' : 'transparent'};
                  font-weight: ${entry.isCurrent ? '600' : '400'};
                  border-left: ${entry.isCurrent ? '3px solid white' : '3px solid transparent'};
                  margin-left: -0.75rem;
                  padding-left: ${entry.isCurrent ? '0.6875rem' : '0.75rem'};
                `}
              >
                {entry.label}
              </a>
            ) : (
              <a href={entry.href} style="text-decoration: none; display: block;">
                <button-v1
                  variant={entry.isCurrent ? 'primary' : 'text'}
                  aria-current={entry.isCurrent ? 'page' : undefined}
                  style={`
                    width: 100%;
                    text-align: left;
                    color: ${entry.isCurrent ? '#fff' : 'rgba(255, 255, 255, 0.85)'};
                    font-size: 0.9375rem;
                    background: ${entry.isCurrent ? 'rgba(255, 255, 255, 0.2)' : 'transparent'};
                    border: none;
                    border-left: ${entry.isCurrent ? '3px solid white' : '3px solid transparent'};
                    margin-left: -0.75rem;
                    padding: 0.5rem 0.75rem;
                    padding-left: ${entry.isCurrent ? '0.6875rem' : '0.75rem'};
                    cursor: pointer;
                  `}
                >
                  {entry.label}
                </button-v1>
              </a>
            )}
          </li>
        ))}
      </ul>
    </details>
  ))}

  <div style="
    margin-top: 3rem;
    padding-top: 1rem;
    border-top: 2px solid rgba(255, 255, 255, 0.2);
    color: rgba(255, 255, 255, 0.6);
    font-size: 0.75rem;
    text-align: center;
  ">
    Built with Starlight ðŸŒŸ
  </div>
</nav>

<style>
  a:hover {
    background: rgba(255, 255, 255, 0.15) !important;
    color: white !important;
  }

  details[open] summary svg {
    transform: rotate(90deg);
  }

  summary::-webkit-details-marker {
    display: none;
  }

  summary:hover {
    color: rgba(255, 255, 255, 0.9) !important;
  }
</style>

